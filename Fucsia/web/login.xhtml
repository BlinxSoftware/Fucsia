<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml"
       xmlns:ui="http://java.sun.com/jsf/facelets"
       xmlns:h="http://java.sun.com/jsf/html"
       xmlns:p="http://primefaces.org/ui"
       xmlns:f="http://java.sun.com/jsf/core">


    <h:head>
        <title>Fucsia</title>

        <style>
            .centrar
            {
                position: absolute;
                /*nos posicionamos en el centro del navegador*/
                top:50%;
                left:50%;
                /*determinamos una anchura*/
                width:400px;
                /*indicamos que el margen izquierdo, es la mitad de la anchura*/
                margin-left:-200px;
                /*determinamos una altura*/
                height:300px;
                /*indicamos que el margen superior, es la mitad de la altura*/
                margin-top:-150px;
                /*border:1px solid #808080;*/
                padding:5px;
            }
        </style>
    </h:head>

    <h:body>
        <div class="ui-fluid">
            <h:form id="frmlogin" class="centrar">
                <p:panel header="Login" style="height: 300px;width: 300px;">
                    <p:inputText value="#{usuarioBean.userName}" placeholder="Usuario"/>
                    <br/>
                    <br/>
                    <p:password value="#{usuarioBean.password}" placeholder="ContraseÃ±a"/>
                    <br/>
                    <br/>
                    <p:commandButton value="Login" actionListener="#{usuarioBean.login()}" style="border-radius: 10px"  oncomplete="handleLoginRequest(xhr, status, args)"/>
                    <br/>
                    <br/>
                    <p:commandButton value="Crear usuario" action="newUser" style="border-radius: 10px"/>

                </p:panel>

            </h:form>  
        </div>

        <script type="text/javascript">
            function handleLoginRequest(xhr, status, args) {
                if (args.validationFailed || !args.loggedIn) {
//                    jQuery('#dialog').effect("shake", {times: 3}, 100);
                } else {
                    //dlg.hide();
//                    PF('dlg').hide()
//                    jQuery('#loginLink').fadeOut();
                    window.location = "/Fucsia/faces/users.xhtml";

                }
            }
        </script>  
    </h:body>



</html>

