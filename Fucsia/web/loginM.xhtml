<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml"
       xmlns:ui="http://java.sun.com/jsf/facelets"
       xmlns:h="http://java.sun.com/jsf/html"
       xmlns:p="http://primefaces.org/ui"
       xmlns:f="http://java.sun.com/jsf/core"
       xmlns:pm="http://primefaces.org/mobile">
    <f:view renderKitId="PRIMEFACES_MOBILE"/>
    <h:head>
        <title>Fucsia</title>
    </h:head>

    <h:body>

        <pm:page id="main">
            <pm:field>
                <p:growl id="growl"   sticky="false"  life="80000" />

                <h1 align="center" style="font-family: fantasy;">Fucsia</h1>
                <br/>
                <p:inputText value="#{usuarioBean.userName}" placeholder="Usuario"/>
                <br/>
                <br/>
                <p:password value="#{usuarioBean.password}" placeholder="ContraseÃ±a"/>
                <br/>
                <br/>
                <p:commandButton value="Login" actionListener="#{usuarioBean.login(actionEvent)}" style="border-radius: 10px" update="growl" oncomplete="handleLoginRequest(xhr, status, args)"/>
                <br/>
                <br/>
                <p:commandButton value="Crear usuario" action="newUser" actionListener="#{usuarioBean.resetEstado()}" style="border-radius: 10px"/>


            </pm:field>
        </pm:page>
        <h:form id="frmlogin" class="centrar">

        </h:form>  


        <script type="text/javascript">
            function handleLoginRequest(xhr, status, args) {
                if (args.validationFailed || !args.loggedIn) {
//                    jQuery('#dialog').effect("shake", {times: 3}, 100);
                } else {
                    //dlg.hide();
//                    PF('dlg').hide()
//                    jQuery('#loginLink').fadeOut();
                    window.location = "/Fucsia/faces/users.xhtml";

                }
            }
        </script>  
    </h:body>



</html>

